<script lang="ts">
  interface Props {
    value: string;
    onInput: (value: string) => void;
  }

  let { value, onInput }: Props = $props();

  function handleInput(event: Event) {
    const target = event.target as HTMLInputElement;
    const inputValue = target.value.slice(0, 1000);
    onInput(inputValue);
  }
</script>

<div class="search-container">
  <svg
    class="search-icon"
    xmlns="http://www.w3.org/2000/svg"
    width="16"
    height="16"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
  >
    <circle cx="11" cy="11" r="8"></circle>
    <path d="m21 21-4.3-4.3"></path>
  </svg>
  <input
    type="text"
    class="search-input"
    placeholder="Search history..."
    {value}
    maxlength="1000"
    oninput={handleInput}
  />
  {#if value}
    <button
      class="search-clear"
      onclick={() => onInput('')}
      aria-label="Clear search"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="14"
        height="14"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M18 6 6 18"></path>
        <path d="m6 6 12 12"></path>
      </svg>
    </button>
  {/if}
</div>
